# 章节模板（动态选择）

> 根据项目实际选择适用的章节模板

## 代码展示规范

### 黄金比例

讲解 70% + 代码 30%

### 代码块规则

1. **长度限制**：每个代码块不超过 20 行
2. **前置讲解**：代码块前必须说明"为什么需要这段代码"
3. **后置分析**：代码块后必须分析"这段代码的设计意图"
4. **注释要求**：关键行必须有注释说明
5. **省略样板**：用 `...` 或 `# 省略样板代码` 替代冗长实现

### 反模式

```markdown
<!-- 错误示范：连续代码块无讲解 -->
```python
def func1():
    pass
```

```python
def func2():
    pass
```

<!-- 正确示范：代码块有上下文 -->
为了实现 X 功能，需要定义 Y 函数：

```python
def func1():
    # 核心逻辑：处理 Z 场景
    pass
```

这个设计的关键在于...
```

## 通用章节结构

### 概念解释

**是什么**：用 1-2 段话解释概念

### 设计意图

**为什么需要**：解释这个模块解决了什么问题

### 核心代码（精炼版）

**源码位置**: `{文件}:{行号}`

```python
# 只展示核心逻辑（不超过 20 行）
def example():
    # 为什么这样写？
    pass
```

**设计意图**：这段代码的关键在于...

### 设计分析

**Q: 为什么这样设计？**
A: ...

**Q: 有哪些 trade-off？**
A: ...

### 对比其他方案

| 维度 | 本方案 | 方案 A | 方案 B |
|------|--------|--------|--------|
| 优势 | ... | ... | ... |
| 劣势 | ... | ... | ... |

### 实战案例

**场景**: ...
**执行流程**: ...

### 章节衔接

```markdown
---

## 章节衔接

**本章回顾**：
- 我们学习了 {本章核心内容}
- 关键收获：{1-2 个核心知识点}

**下一章预告**：
- 在 `{下一章文件名}` 中，我们将学习 {下一章主题}
- 为什么需要学习：{本章内容如何引出下一章}
- 关键问题：{下一章要解决的核心问题}

**知识关联**：
```
[本章] ──依赖──> [下一章]
   │
   └── 本章的 {概念 A} 是下一章 {概念 B} 的基础
```
```

## 专用章节模板

### foundation.md - 基础抽象层

用于：自研框架、消息结构、路径抽象等

### core_agent.md - Agent 核心

用于：ReAct 循环、状态管理、LLM 调用等

### context_management.md - Context 管理

用于：Context 压缩、Window 管理、动态检索等

### prompt_system.md - Prompt 系统

用于：System prompt、Few-shot、CoT 等

### memory_system.md - Memory 系统

用于：Episodic/Semantic/Working/Long-term Memory

### tools_mcp.md - Tool & MCP

用于：工具定义、MCP 集成、依赖注入等

### multi_agent.md - Multi-Agent

用于：协作模式、通信协议、调度机制等

### protocols.md - 协议层

用于：ACP、MCP、Wire 等协议实现

## 总结章节模板（XX-summary.md）

> 最后一章，编号根据实际章节数动态调整

### 模板结构

```markdown
# {项目名} 知识图谱总结

## 核心概念关系图

用 ASCII 图展示项目的核心模块和它们之间的关系：

```
                      ┌─────────────────┐
                      │   {项目名}       │
                      └────────┬────────┘
             ┌─────────────────┼─────────────────┐
             ▼                 ▼                 ▼
      ┌──────────┐      ┌──────────┐      ┌──────────┐
      │ 模块 A   │      │ 模块 B   │      │ 模块 C   │
      │ (Ch.0X)  │      │ (Ch.0Y)  │      │ (Ch.0Z)  │
      └──────────┘      └──────────┘      └──────────┘
```

## 学习检查清单

用于自测是否掌握了核心知识点：

### 基础理解（必须掌握）
- [ ] 能用一句话解释项目的核心定位
- [ ] 能画出项目的架构图
- [ ] 能说出 3 个核心设计决策及其原因

### 深度理解（面试加分）
- [ ] 能解释 {核心模块 1} 的实现原理
- [ ] 能说出 {核心模块 2} 的 trade-off
- [ ] 能对比本项目与 {竞品} 的差异

### 实战能力（高级要求）
- [ ] 能手写一个 {集成示例}
- [ ] 能设计一个 {场景} 的架构方案
- [ ] 能指出项目的 {技术债务/改进方向}

## 知识点速查表

| 章节 | 核心知识点 | 面试高频问题 |
|------|-----------|-------------|
| Ch.01 | ... | ... |
| Ch.02 | ... | ... |
| ... | ... | ... |

## 推荐学习路径

根据读者背景推荐不同的学习路径：

### 新手路径
1. 先读 00-index 的术语速查
2. 再读 Ch.01 架构概览
3. 然后按顺序阅读各章节
4. 最后做检查清单自测

### 进阶路径
1. 直接读 Ch.XX 面试 QA
2. 遇到不懂的概念回溯到对应章节
3. 重点关注源码分析部分

### 速成路径
1. 只读 00-index + XX-summary
2. 重点看架构图和检查清单
3. 面试前过一遍 QA
```

## 索引章节模板（00-index.md）

> 第一章，包含版本声明和术语速查

### 模板结构

```markdown
# {项目名} 深度学习索引

> **分析版本**: `{commit_hash}` ({branch_name})
> **分析日期**: {date}
> **仓库地址**: {repo_url}

**重要提示**：本文档基于上述版本的源码分析生成。如果源码已更新，部分内容（如行号引用、代码片段）可能与最新版本不符。

```bash
# 切换到分析版本
git checkout {commit_hash}
```

## 项目定位

{一句话描述项目是什么、解决什么问题}

## 章节导航

| 章节 | 主题 | 核心内容 |
|------|------|----------|
| 01 | ... | ... |
| 02 | ... | ... |
| ... | ... | ... |

## 学习路径

{根据读者背景推荐不同路径}

---

## 核心术语速查

{费曼学习法风格的术语解释，参考 glossary_guide.md}
```
